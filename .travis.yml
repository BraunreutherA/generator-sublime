language: node_js
node_js:
- 0.10.30
before_script:
- npm link
- mkdir -p shippable/codecoverage
after_success:
- npm run coverage
- mv coverage/cobertura-coverage.xml shippable/codecoverage/coverage.xml
- mocha test -R mocha-lcov-reporter  && cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js
  --verbose
deploy:
  provider: npm
  email: thaiat@ipelia.com
  api_key:
    secure: XX8AMRtoc128BcYtJ+Dm5gCWxh01Uj90a3JJebZvUiiXVEHgHFIh7rQxhugzxNBg5pNNWa+l+GptPOP8RXVSd9rSyRfo7f8Ei9AiFPLV1MtMnBs9PwZBBJS6F1LOYfQ3WJI+kIVQPn6Bs8GSvJL8bYXZYFZLTmJrCRoP7LMfBYk=
  on:
    tags: true
    branch: master
    repo: thaiat/generator-sublime
